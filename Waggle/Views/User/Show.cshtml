@model Waggle.ViewModels.UserShowModel

@{
    ViewBag.Title = "Profile";
}

@if (Model.isCurrentUser) {
    <h2 style="display:inline;">My Profile</h2> @Html.ActionLink("Edit", "Edit", "User", new{id=Model.user.Id}, null)
    <br/>
    <br/>
}
else {
    <h2>Profile Page</h2>
    <br/>
}

<img src=@Model.user.AvatarPath alt="avatar" height="150" width="150">
<br/>

@Html.LabelFor(m => m.user.Name, new {style="display:inline;"}): @Model.user.Name
<br/>
@Html.LabelFor(m => m.user.Email, new {style="display:inline;"}): @Model.user.Email
<br/>
<br/>
@Html.LabelFor(m => m.userprofile.Description) @Model.userprofile.Description

@if (Model.isCurrentUser) {
    <h2>Upload a File</h2>
    using (Html.BeginForm("Upload", "File", FormMethod.Post, new { enctype = "multipart/form-data" }))
    { <input type="file" name="uploadFile" />
      <input type="submit" id="btnSubmit" value="Upload" />
    }
}

@if (Model.files != null) { 
    <h2>Uploaded Files</h2>
    foreach (var file in Model.files) {
        @Html.ActionLink(file.fileDisplayName, "Download", "File", new {Id=file.Id}, null);
        if (Model.isCurrentUser || Roles.IsUserInRole("admin")) { 
           @Html.ActionLink("Delete", "Delete", "File", new { Id = file.Id }, null);                                                                        
        }
        <br/>
    }
}